# {{ ansible_managed }}
# PostgreSQL Client Authentication Configuration File
#
# Generated by Ansible
# All handmade changes can be rewritten!
#
# Allow any user on the local system to connect to any database with
# any database user name using Unix-domain sockets (the default for local
# connections).
#
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# Default:
{% for connection in pg_cfg_pg_hba_default %}
# {{ connection.comment }}
{{ connection.type }}  {{ connection.database }}  {{ connection.user }}  {{ connection.address }}  {{ connection.method }}
{% endfor %}

# Custom password hosts
{% for host in pg_cfg_pg_hba_passwd_hosts %}
host  all  all  {{ host }}  password
{% endfor %}

# Application servers
{% for host in app_servers %}
host  all  all  {{ host }}/32  password
{% endfor %}

# Trusted hosts
{% for host in pg_cfg_pg_hba_trust_hosts %}
host  all  all  {{ host }}  trust
{% endfor %}

# User custom
{% for connection in pg_cfg_pg_hba_custom %}
# {{ connection.comment }}
{{ connection.type }}  {{ connection.database }}  {{ connection.user }}  {{ connection.address }}  {{ connection.method }}
{% endfor %}
